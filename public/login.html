<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TierAlba — Sign In to Your Account</title>
<meta name="description" content="Log in to your TierAlba dashboard. Access your trading signals, EA licenses, analytics, and manage your prop firm challenge.">
<link rel="canonical" href="https://www.tieralba.com/login">
<meta property="og:title" content="TierAlba — Sign In">
<meta property="og:description" content="Access your TierAlba trading dashboard.">
<meta property="og:url" content="https://www.tieralba.com/login">
<meta property="og:image" content="https://www.tieralba.com/og-image.png">
<meta name="twitter:card" content="summary">
<link rel="icon" type="image/png" href="/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=Cormorant+Garamond:wght@500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #0a0a0a;
            --border: rgba(255,255,255,0.08);
            --border-focus: rgba(212,185,120,0.5);
            --gold: #d4b978;
            --gold-btn: #dfc088;
            --text: #f0ede6;
            --text-2: #a09b91;
            --text-3: #5c5952;
            --red: #e05252;
            --green: #5cb87a;
            --radius: 8px;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            padding: 2rem 1.5rem;
        }

        .auth-container { width: 100%; max-width: 400px; text-align: center; }

        /* Logo */
        .auth-logo { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 2.5rem; }
        .auth-logo-mark {
            width: 36px; height: 36px; background: linear-gradient(135deg, var(--gold), #c5a855);
            border-radius: 8px; display: flex; align-items: center; justify-content: center;
            font-family: 'Cormorant Garamond', serif; font-weight: 700; font-size: 18px; color: var(--bg);
        }
        .auth-logo-text { font-family: 'Cormorant Garamond', serif; font-size: 26px; font-weight: 700; color: var(--text); }
        .auth-logo-text sup { font-size: 10px; vertical-align: super; color: var(--text-2); }

        .auth-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 28px; font-weight: 600; margin-bottom: 2rem; letter-spacing: -0.3px;
        }

        .form-group { margin-bottom: 1.25rem; text-align: left; }
        .form-label { display: block; font-size: 14px; font-weight: 500; color: var(--text); margin-bottom: 8px; }
        .form-input {
            width: 100%; padding: 12px 14px; background: transparent;
            border: 1px solid var(--border); border-radius: var(--radius);
            color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 16px;
            transition: all 0.2s; outline: none;
        }
        .form-input:focus { border-color: var(--border-focus); box-shadow: 0 0 0 2px rgba(212,185,120,0.1); }
        .form-input::placeholder { color: var(--text-3); }

        .auth-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; }
        .auth-check { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-2); cursor: pointer; }
        .auth-check input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--gold); cursor: pointer; }
        .forgot-link { font-size: 14px; color: var(--gold); text-decoration: none; transition: opacity 0.2s; }
        .forgot-link:hover { opacity: 0.8; }

        .btn-submit {
            width: 100%; padding: 14px; background: var(--gold-btn); border: none; border-radius: var(--radius);
            color: #0a0a0a; font-family: 'DM Sans', sans-serif; font-size: 15px; font-weight: 600;
            cursor: pointer; transition: all 0.2s;
        }
        .btn-submit:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-submit:active { transform: translateY(0); }
        .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }



        .auth-footer { margin-top: 2rem; font-size: 14px; color: var(--text-2); }
        .auth-footer a { color: var(--gold); text-decoration: none; font-weight: 500; }
        .auth-footer a:hover { text-decoration: underline; }

        .msg { padding: 11px 14px; border-radius: var(--radius); font-size: 13px; margin-bottom: 1rem; display: none; text-align: left; line-height: 1.5; }
        .msg.error { background: rgba(224,82,82,0.1); border: 1px solid rgba(224,82,82,0.25); color: var(--red); }
        .msg.success { background: rgba(92,184,122,0.1); border: 1px solid rgba(92,184,122,0.25); color: var(--green); }
        .msg.show { display: block; }

        .spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid rgba(10,10,10,0.2); border-top-color: #0a0a0a; border-radius: 50%; animation: spin 0.6s linear infinite; margin-right: 8px; vertical-align: middle; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .auth-form { display: none; }
        .auth-form.active { display: block; animation: fadeUp 0.3s ease; }
        @keyframes fadeUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

        .theme-toggle {
            position: fixed; top: 1.5rem; right: 1.5rem;
            width: 36px; height: 36px; border-radius: 50%; background: transparent;
            border: 1px solid var(--border); color: var(--text-3); cursor: pointer;
            transition: all 0.2s; display: flex; align-items: center; justify-content: center; z-index: 10;
        }
        .theme-toggle:hover { color: var(--text); border-color: rgba(255,255,255,0.15); }
        .theme-toggle svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 2; }

        #refCodeGroup { display: none; }

        body.light { background: #f5f3ee; color: #1a1815; }
        body.light .auth-logo-text { color: #1a1815; }
        body.light .form-input { border-color: rgba(0,0,0,0.12); color: #1a1815; }
        body.light .form-input:focus { border-color: rgba(184,154,80,0.4); box-shadow: 0 0 0 2px rgba(184,154,80,0.08); }
        body.light .btn-submit { background: #c5a855; color: #fff; }
        body.light .theme-toggle { border-color: rgba(0,0,0,0.1); color: #9b978f; }
        body.light .auth-title { color: #1a1815; }
        body.light .form-label { color: #1a1815; }
        body.light .auth-check { color: #5c5952; }

        @media (max-width: 480px) {
            body { padding: 1.5rem 1rem; }
            .auth-title { font-size: 24px; }
            .auth-row { flex-wrap: wrap; gap: 8px; }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <svg id="themeIcon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>

    <div class="auth-container">
        <div class="auth-logo">
            <img src="/logo.png" alt="TierAlba" style="width:44px;height:44px;border-radius:12px;object-fit:contain;">
            <div class="auth-logo-text">TierAlba<sup>®</sup></div>
        </div>

        <div class="msg error" id="msgError"></div>
        <div class="msg success" id="msgSuccess"></div>

        <!-- LOGIN -->
        <div class="auth-form active" id="loginForm">
            <div class="auth-title">Sign in to your account</div>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email address</label>
                    <input type="email" class="form-input" id="loginEmail" required autocomplete="email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" required autocomplete="current-password">
                </div>
                <div class="auth-row">
                    <label class="auth-check"><input type="checkbox" id="rememberMe"> Remember me</label>
                    <a href="#" class="forgot-link" onclick="showForgot(event)">Forgot password?</a>
                </div>
                <button type="submit" class="btn-submit" id="loginBtn">Sign In</button>
            </form>
            <div class="auth-footer">Ready to trade? <a href="#" onclick="switchTab('register')">Create your account</a></div>
        </div>

        <!-- REGISTER -->
        <div class="auth-form" id="registerForm">
            <div class="auth-title">Create your account</div>
            <form onsubmit="handleRegister(event)">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div class="form-group"><label class="form-label">First Name *</label><input type="text" class="form-input" id="regFirstName" required placeholder="John"></div>
                    <div class="form-group"><label class="form-label">Last Name *</label><input type="text" class="form-input" id="regLastName" required placeholder="Doe"></div>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div class="form-group"><label class="form-label">Title</label>
                        <select class="form-input" id="regTitle" style="cursor:pointer;">
                            <option value="">Select</option><option>Mr</option><option>Mrs</option><option>Ms</option><option>Dr</option><option>Other</option>
                        </select>
                    </div>
                    <div class="form-group"><label class="form-label">Date of Birth *</label><input type="date" class="form-input" id="regDOB" required></div>
                </div>
                <div class="form-group"><label class="form-label">Country *</label>
                    <select class="form-input" id="regCountry" required style="cursor:pointer;">
                        <option value="">Select your country</option>
                        <option>Afghanistan</option><option>Albania</option><option>Algeria</option><option>Argentina</option><option>Australia</option><option>Austria</option><option>Belgium</option><option>Brazil</option><option>Bulgaria</option><option>Canada</option><option>Chile</option><option>China</option><option>Colombia</option><option>Croatia</option><option>Czech Republic</option><option>Denmark</option><option>Egypt</option><option>Estonia</option><option>Finland</option><option>France</option><option>Germany</option><option>Greece</option><option>Hungary</option><option>Iceland</option><option>India</option><option>Indonesia</option><option>Ireland</option><option>Israel</option><option>Italy</option><option>Japan</option><option>Latvia</option><option>Lithuania</option><option>Luxembourg</option><option>Malaysia</option><option>Mexico</option><option>Morocco</option><option>Netherlands</option><option>New Zealand</option><option>Nigeria</option><option>Norway</option><option>Pakistan</option><option>Peru</option><option>Philippines</option><option>Poland</option><option>Portugal</option><option>Romania</option><option>Saudi Arabia</option><option>Serbia</option><option>Singapore</option><option>Slovakia</option><option>Slovenia</option><option>South Africa</option><option>South Korea</option><option>Spain</option><option>Sweden</option><option>Switzerland</option><option>Thailand</option><option>Turkey</option><option>Ukraine</option><option>United Arab Emirates</option><option>United Kingdom</option><option>United States</option><option>Vietnam</option><option>Other</option>
                    </select>
                </div>
                <div class="form-group"><label class="form-label">Email Address *</label><input type="email" class="form-input" id="regEmail" required autocomplete="email" placeholder="you@example.com"></div>
                <div class="form-group"><label class="form-label">Phone Number</label><input type="tel" class="form-input" id="regPhone" placeholder="+39 123 456 7890"></div>
                <div class="form-group"><label class="form-label">Password *</label><input type="password" class="form-input" id="regPassword" required minlength="8" placeholder="Min 8 characters"></div>
                <div class="form-group" id="refCodeGroup"><label class="form-label">Referral code</label><input type="text" class="form-input" id="regRefCode" placeholder="Optional"></div>

                <div style="margin-bottom:12px;">
                    <label style="display:flex;gap:10px;align-items:flex-start;cursor:pointer;font-size:13px;color:var(--text-2);line-height:1.5;">
                        <input type="checkbox" id="regTerms" required style="margin-top:3px;min-width:16px;height:16px;accent-color:var(--gold);cursor:pointer;">
                        <span>I confirm that I am at least 18 years old and agree to TierAlba's <a href="#" style="color:var(--gold);text-decoration:none;">Terms of Service</a> and <a href="#" style="color:var(--gold);text-decoration:none;">Privacy Policy</a>.</span>
                    </label>
                </div>
                <div style="margin-bottom:1.5rem;">
                    <label style="display:flex;gap:10px;align-items:flex-start;cursor:pointer;font-size:13px;color:var(--text-2);line-height:1.5;">
                        <input type="checkbox" id="regMarketing" style="margin-top:3px;min-width:16px;height:16px;accent-color:var(--gold);cursor:pointer;">
                        <span>I'd like to receive trading insights, exclusive offers and product updates from TierAlba.</span>
                    </label>
                </div>

                <button type="submit" class="btn-submit" id="regBtn">Create Account</button>
            </form>
            <div class="auth-footer">Already have an account? <a href="#" onclick="switchTab('login')"> Sign in</a></div>
        </div>

        <!-- FORGOT -->
        <div class="auth-form" id="forgotForm">
            <div class="auth-title">Reset Password</div>
            <p style="font-size:14px;color:var(--text-2);margin-bottom:1.5rem;">We'll send you a link to reset your password.</p>
            <form onsubmit="handleForgot(event)">
                <div class="form-group"><label class="form-label">Email address</label><input type="email" class="form-input" id="forgotEmail" required></div>
                <button type="submit" class="btn-submit" id="forgotBtn">Send Reset Link</button>
            </form>
            <div class="auth-footer" style="margin-top:1.5rem;"><a href="#" onclick="backToLogin(event)">← Back to login</a></div>
        </div>
    </div>

<script>
    const API_URL = window.location.origin;

    function switchTab(tab) {
        hideMessages();
        document.getElementById('loginForm').classList.toggle('active', tab === 'login');
        document.getElementById('registerForm').classList.toggle('active', tab === 'register');
        document.getElementById('forgotForm').classList.remove('active');
    }

    function showError(msg) { const el = document.getElementById('msgError'); el.textContent = msg; el.classList.add('show'); document.getElementById('msgSuccess').classList.remove('show'); }
    function showSuccess(msg) { const el = document.getElementById('msgSuccess'); el.textContent = msg; el.classList.add('show'); document.getElementById('msgError').classList.remove('show'); }
    function hideMessages() { document.getElementById('msgError').classList.remove('show'); document.getElementById('msgSuccess').classList.remove('show'); }

    async function handleLogin(e) {
        e.preventDefault(); hideMessages();
        const btn = document.getElementById('loginBtn'); const orig = btn.textContent;
        btn.disabled = true; btn.innerHTML = '<span class="spinner"></span>Signing in...';
        try {
            const res = await fetch(`${API_URL}/api/auth/login`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email: document.getElementById('loginEmail').value, password: document.getElementById('loginPassword').value }) });
            const data = await res.json();
            if (!res.ok) throw new Error(data.error || 'Login failed');
            localStorage.setItem('auth_token', data.token);
            localStorage.setItem('user_data', JSON.stringify(data.user));
            if (document.getElementById('rememberMe').checked) localStorage.setItem('remember_email', document.getElementById('loginEmail').value);
            else localStorage.removeItem('remember_email');
            showSuccess('Signed in!');
            setTimeout(() => { window.location.href = '/dashboard'; }, 800);
        } catch (err) { showError(err.message); btn.disabled = false; btn.textContent = orig; }
    }

    async function handleRegister(e) {
        e.preventDefault(); hideMessages();
        const btn = document.getElementById('regBtn'); const orig = btn.textContent;
        btn.disabled = true; btn.innerHTML = '<span class="spinner"></span>Creating...';
        try {
            const res = await fetch(`${API_URL}/api/auth/register`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({
                name: (document.getElementById('regFirstName').value + ' ' + document.getElementById('regLastName').value).trim(),
                first_name: document.getElementById('regFirstName').value,
                last_name: document.getElementById('regLastName').value,
                title: document.getElementById('regTitle').value || null,
                date_of_birth: document.getElementById('regDOB').value || null,
                country: document.getElementById('regCountry').value || null,
                email: document.getElementById('regEmail').value,
                phone: document.getElementById('regPhone').value || null,
                password: document.getElementById('regPassword').value,
                referralCode: document.getElementById('regRefCode').value.trim() || null,
                marketing_consent: document.getElementById('regMarketing').checked
            }) });
            const data = await res.json();
            if (!res.ok) throw new Error(data.error || 'Registration failed');
            localStorage.setItem('auth_token', data.token);
            localStorage.setItem('user_data', JSON.stringify(data.user));
            showSuccess('Account created!');
            setTimeout(() => { window.location.href = '/dashboard'; }, 800);
        } catch (err) { showError(err.message); btn.disabled = false; btn.textContent = orig; }
    }

    function showForgot(e) { e.preventDefault(); hideMessages(); document.getElementById('loginForm').classList.remove('active'); document.getElementById('registerForm').classList.remove('active'); document.getElementById('forgotForm').classList.add('active'); }
    function backToLogin(e) { e.preventDefault(); hideMessages(); document.getElementById('forgotForm').classList.remove('active'); document.getElementById('loginForm').classList.add('active'); }

    async function handleForgot(e) {
        e.preventDefault(); hideMessages();
        const btn = document.getElementById('forgotBtn'); const orig = btn.textContent;
        btn.disabled = true; btn.innerHTML = '<span class="spinner"></span>Sending...';
        try {
            const res = await fetch(`${API_URL}/api/auth/forgot-password`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email: document.getElementById('forgotEmail').value }) });
            const data = await res.json();
            if (!res.ok) throw new Error(data.error || 'Failed');
            showSuccess('Reset link sent! Check your email.');
        } catch (err) { showError(err.message); }
        btn.disabled = false; btn.textContent = orig;
    }


    function toggleTheme() {
        document.body.classList.toggle('light');
        const isLight = document.body.classList.contains('light');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        document.getElementById('themeIcon').innerHTML = isLight
            ? '<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>'
            : '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
    }
    if (localStorage.getItem('theme') === 'light') { document.body.classList.add('light'); toggleTheme(); toggleTheme(); document.body.classList.add('light'); }

    const savedEmail = localStorage.getItem('remember_email');
    if (savedEmail) { document.getElementById('loginEmail').value = savedEmail; document.getElementById('rememberMe').checked = true; }

    (function() { const ref = new URLSearchParams(window.location.search).get('ref'); if (ref) { document.getElementById('regRefCode').value = ref; document.getElementById('refCodeGroup').style.display = 'block'; switchTab('register'); } })();

    if (localStorage.getItem('auth_token')) window.location.href = '/dashboard';
</script>
</body>
</html>
